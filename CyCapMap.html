<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <style>
        canvas {
            border:1px solid #d3d3d3;
            background-color: #f1f1f1;
        }
    </style>
</head>
<body onload="startGame()">
<script>

    var p1;
    var p2;
    var flag1;
    var flag2;

    function startGame() {
        myGameArea.start();
        p1 = new drawCharacter(30,30,"red",myGameArea.canvas.width/2,myGameArea.canvas.height-50);
        p2 = new drawCharacter(30,30,"blue",myGameArea.canvas.width/2,50);
        flag1 = new drawFlag(10,10,"orange",myGameArea.canvas.width/2,myGameArea.canvas.height-100);
        flag2 = new drawFlag(10,10,"green",myGameArea.canvas.width/2,100);
    }

    var myGameArea = {
        canvas : document.createElement("canvas"),
        start : function() {
            this.canvas.width = 2500;
            this.canvas.height = 1300;
            this.context = this.canvas.getContext("2d");
            document.body.insertBefore(this.canvas, document.body.childNodes[0]);
            /*inserts the newly created <canvas> element and inserts it as
            * the first child node of the <body> element*/
            this.interval = setInterval(updateGameArea,20); /*Updates game area every 20 mil-sec*/
            window.addEventListener('keydown', function (e){ /*indicates if key is being pressed*/
                /*myGameArea.key = e.keyCode;*/
                myGameArea.keys = (myGameArea.keys || []); /*using array allows multiple key inputs allowing players to move diagonally*/
                myGameArea.keys[e.keyCode] = (e.type == "keydown");
                /*for each keyCode being pressed, adds 'true' to the keys array*/
            })
            window.addEventListener('keyup', function(e){ /*indicates if key not being pressed*/
                myGameArea.keys[e.keyCode] = (e.type == "keydown");
            })
        },
        clear : function() {
            this.context.clearRect(0,0,this.canvas.width,this.canvas.height);
        }
    }

    function drawCharacter(width, height, color, x,y){
        this.width = width;
        this.height = height;
        this.speedX = 0;
        this.speedY = 0;
        this.x = x;
        this.y = y;
        this.update = function() {
            ctx = myGameArea.context; /*reference canvas area*/
            ctx.fillStyle = color;
            ctx.fillRect(this.x, this.y, this.width, this.height); /*Draws piece on board*/
        }
        this.newPos = function(){
            this.x += this.speedX;
            this.y += this.speedY;
        }
    }

    function drawFlag(width, height, color, x, y){
        this.width = width;
        this.height = height;
        this.x = x;
        this.y = y;
        this.update = function(){ /*needs to be function if flag moves when picked up*/
            ctx = myGameArea.context;
            ctx.fillStyle = color;
            ctx.fillRect(this.x, this.y, this.width, this.height);
        }
    }

    function updateGameArea(){ /*redraws the position of components 50 times a second*/
        myGameArea.clear();
        p1.speedX = 0; /*stops p1 from moving horizontally*/
        p1.speedY = 0; /*stops p1 from moving vertically*/
        if(myGameArea.keys && myGameArea.keys[65]){p1.speedX = -1;}
        if(myGameArea.keys && myGameArea.keys[68]){p1.speedX = 1;}
        if(myGameArea.keys && myGameArea.keys[87]){p1.speedY = -1;}
        if(myGameArea.keys && myGameArea.keys[83]){p1.speedY = 1;}
        p1.newPos();
        p1.update();
        p2.update();
        flag1.update();
        flag2.update();
    }
</script>

<p>This is our first CyMap!</p>

</body>
</html>
